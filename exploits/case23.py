import random, string

from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.webdriver.common.keys import Keys

def get_username(): 
	digits = "".join( [random.choice(string.digits) for i in xrange(3)] )
	chars = "".join( [random.choice(string.letters[:26]) for i in xrange(5)] )
	return digits + chars

location = "./geckodriver"
firefox_capabilities = DesiredCapabilities.FIREFOX
firefox_capabilities["marionette"] = True
firefox_capabilities["binary"] = "/usr/bin/firefox"

print "opening browser.. registering new account"
driver = webdriver.Firefox(capabilities=firefox_capabilities,executable_path='./geckodriver')
driver.get('http://wsb.com/Assignment2/case23/register.php')
username = driver.find_element_by_name("username")
email = driver.find_element_by_name("email")
password = driver.find_element_by_name("password")
cfmpassword = driver.find_element_by_name("confirmpwd")

random = get_username();
pwd = 'AZaz09'
username.send_keys(random);
email.send_keys(random + '@email.com');
password.send_keys(pwd);
cfmpassword.send_keys(pwd);
driver.find_element_by_xpath("/html/body/form/input[5]").click()

print "logging you in.."
driver.get('http://wsb.com/Assignment2/case23/login.php')
email = driver.find_element_by_name("email")
password = driver.find_element_by_name("password")
email.send_keys(random + '@email.com');
password.send_keys(pwd)
driver.find_element_by_xpath("/html/body/form/input[3]").click()

driver.get('http://wsb.com/Assignment2/case23/protected_page.php?admin=true')

